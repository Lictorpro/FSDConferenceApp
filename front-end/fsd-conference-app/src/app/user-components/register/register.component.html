<app-header />
<div class="container justify-content-center">
    <div class="row justify-content-center">
        <h1>Register for event</h1>
    </div>
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
        <div class="row">
            <div class="col-6">
                <mat-form-field>
                    <mat-label>First name</mat-label>
                    <input matInput placeholder="First name" formControlName="firstName">
                </mat-form-field>
            </div>
            <div class="col-6">
                <mat-form-field>
                    <mat-label>Last name</mat-label>
                    <input matInput placeholder="Last name" formControlName="lastName">
                </mat-form-field>
            </div>
        </div>
        <mat-form-field>
            <mat-label>Company</mat-label>
            <input matInput placeholder="Company" formControlName="company">
        </mat-form-field>
        <div class="row">
            <div class="col-6">
                <mat-form-field>
                    <mat-label>Primary address</mat-label>
                    <input matInput placeholder="Primary address" formControlName="primaryAddress">
                </mat-form-field>
            </div>
            <div class="col-6">
                <mat-form-field>
                    <mat-label>Secondary address</mat-label>
                    <input matInput placeholder="Secondary address" formControlName="secondaryAddress">
                </mat-form-field>
            </div>
        </div>
        <div class="row">
            <div class="col-6">
                <mat-form-field>
                    <mat-label>City</mat-label>
                    <input matInput placeholder="City" formControlName="city">
                </mat-form-field>
            </div>
            <div class="col-6">
                <mat-form-field>
                    <mat-label>Zip code</mat-label>
                    <input matInput placeholder="Zip code" formControlName="zipCode">
                </mat-form-field>
            </div>
        </div>
        <mat-form-field>
            <mat-label>Country</mat-label>
            <input matInput placeholder="Country" formControlName="country">
        </mat-form-field>
        <div class="row">
            <div class="col-6">
                <mat-form-field>
                    <mat-label>Email</mat-label>
                    <input matInput placeholder="Email" formControlName="email">
                </mat-form-field>
            </div>
            <div class="col-6">
                <mat-form-field>
                    <mat-label>Email confirm</mat-label>
                    <input matInput placeholder="Email confirm" formControlName="emailConfirm">
                </mat-form-field>
            </div>
        </div>
        <section class="events-section" formArrayName="events">
            <h2>Events</h2>
            @for (event of events; track event._id; let idx = $index) {
            <mat-checkbox class="events-margin" [value]="event._id" [formControlName]="idx">{{ event.name
                }}</mat-checkbox>
            }
        </section>
        <mat-form-field>
            <mat-label>Promo code</mat-label>
            <input matInput placeholder="Promo code" formControlName="promoCode">
        </mat-form-field>
        <button mat-flat-button color="primary">Register</button>
    </form>
    @if(emailIsInvalid){
    <p class="error-message">Please enter valid email format.</p>
    }
    @if(isError){
    <p class="error-message">{{errorMessage}}</p>
    }
</div>